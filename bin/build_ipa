#!/usr/bin/env sh

# Commands:
# bin/build_ipa --community
# bin/build_ipa --storypad
# bin/build_ipa --spooky

FLAVOR=$1

case "$FLAVOR" in
--storypad)
  CMD="flutter build ipa --flavor storypad --dart-define=CUPERTINO=yes --dart-define-from-file=env/storypad.json --target=lib/main_storypad.dart"
  ;;
--spooky)
  CMD="flutter build ipa --flavor spooky --dart-define=CUPERTINO=yes --dart-define-from-file=env/spooky.json --target=lib/main_spooky.dart"
  ;;
--community | "")
  CMD="flutter build ipa --flavor community --dart-define=CUPERTINO=yes --dart-define-from-file=env/community.json --target=lib/main_community.dart"
  ;;
*)
  echo "Invalid option: $FLAVOR"
  echo "Usage: bin/dev [--storypad | --spooky | --community]"
  exit 1
  ;;
esac

echo "Executing: $CMD"
exec $CMD
