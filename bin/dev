#!/usr/bin/env sh

# Use this [bin/dev] to run Flutter project in specific flavor.
#
# Commands:
# bin/dev --community
# bin/dev --storypad
# bin/dev --spooky
# bin/dev --community-ios
# bin/dev --storypad-ios
# bin/dev --spooky-ios

FLAVOR=$1

case "$FLAVOR" in
--storypad)
  CMD="flutter run --flavor storypad --dart-define-from-file=configs/storypad.json --target=lib/main_storypad.dart"
  ;;
--spooky)
  CMD="flutter run --flavor spooky --dart-define-from-file=configs/spooky.json --target=lib/main_spooky.dart"
  ;;
--community | "")
  CMD="flutter run --flavor community --dart-define-from-file=configs/community.json --target=lib/main_community.dart"
  ;;
--storypad-ios)
  CMD="flutter run --flavor storypad --dart-define=CUPERTINO=yes --dart-define-from-file=configs/storypad.json --target=lib/main_storypad.dart"
  ;;
--storypad-macos)
  CMD="flutter run --flavor storypad --dart-define=CUPERTINO=yes --dart-define-from-file=configs/storypad.json --target=lib/main_storypad.dart -d macos"
  ;;
--spooky-ios)
  CMD="flutter run --flavor spooky --dart-define=CUPERTINO=yes --dart-define-from-file=configs/spooky.json --target=lib/main_spooky.dart"
  ;;
--community-ios | "")
  CMD="flutter run --flavor community --dart-define=CUPERTINO=yes --dart-define-from-file=configs/community.json --target=lib/main_community.dart"
  ;;
--community-macos | "")
  CMD="flutter run --flavor community --dart-define=CUPERTINO=yes --dart-define-from-file=configs/community.json --target=lib/main_community.dart -d macos"
  ;;
*)
  echo "Invalid option: $FLAVOR"
  echo "Usage: bin/dev [--storypad | --spooky | --community]"
  exit 1
  ;;
esac

# Remove 1st args
shift

echo "Executing: $CMD $1"
eval $CMD $1
